{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Alec%20Jiang/Documents/mtgTracker/mtgtracker/src/app/community/page.tsx"],"sourcesContent":["\"use client\"\r\nimport { useEffect, useState } from 'react';\r\nimport { onAuthStateChanged, User } from 'firebase/auth';\r\nimport { auth, db } from '@/config/firebase-config';\r\nimport { useRouter } from 'next/navigation';\r\nimport { collection, query, where, getDocs, orderBy, limit, Query, DocumentData } from 'firebase/firestore';\r\n\r\ninterface UserSearchResult {\r\n  id: string;\r\n  username: string;\r\n  displayName?: string;\r\n  email?: string;\r\n}\r\n\r\nexport default function Community() {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState<UserSearchResult[]>([]);\r\n  const [searching, setSearching] = useState(false);\r\n  const [hasSearched, setHasSearched] = useState(false);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (user: User | null) => {\r\n      setUser(user);\r\n      setLoading(false);\r\n    });\r\n    return () => unsubscribe();\r\n  }, [router]);\r\n\r\n  const searchUsers = async (searchTerm: string) => {\r\n    if (!searchTerm.trim() || searchTerm.length < 2) {\r\n      setSearchResults([]);\r\n      setHasSearched(false);\r\n      return;\r\n    }\r\n\r\n    setSearching(true);\r\n    setHasSearched(true);\r\n    \r\n    try {\r\n      const usersRef = collection(db, 'users');\r\n      const userQuery = query(\r\n        usersRef,\r\n        where('username', '>=', searchTerm.toLowerCase()),\r\n        where('username', '<=', searchTerm.toLowerCase() + '\\uf8ff'),\r\n        orderBy('username'),\r\n        limit(20)\r\n      );\r\n      \r\n      const querySnapshot = await getDocs(userQuery);\r\n      const results: UserSearchResult[] = [];\r\n      \r\n      querySnapshot.forEach((doc) => {\r\n        const userData = doc.data() as {\r\n          username: string;\r\n          displayName?: string;\r\n          email?: string;\r\n        };\r\n        results.push({\r\n          id: doc.id,\r\n          username: userData.username,\r\n          displayName: userData.displayName,\r\n          email: userData.email\r\n        });\r\n      });\r\n      \r\n      setSearchResults(results);\r\n    } catch (error) {\r\n      console.error('Error searching users:', error);\r\n      setSearchResults([]);\r\n    } finally {\r\n      setSearching(false);\r\n    }\r\n  };\r\n\r\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const value = e.target.value;\r\n    setSearchQuery(value);\r\n    \r\n    const timeoutId = setTimeout(() => {\r\n      searchUsers(value);\r\n    }, 300);\r\n    \r\n    return () => clearTimeout(timeoutId);\r\n  };\r\n\r\n  const visitUserProfile = (userId: string) => {\r\n    router.push(`/profile/${userId}`);\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"p-4\">Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen\" style={{ backgroundColor: '#181e2c' }}>\r\n      <div className=\"p-8 max-w-4xl mx-auto\">\r\n        <h1 className=\"text-4xl font-bold mb-8 text-white\">Find Users</h1>\r\n        \r\n        <div className=\"mb-8\">\r\n          <div className=\"relative\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search for users by username...\"\r\n              value={searchQuery}\r\n              onChange={handleSearchChange}\r\n              className=\"w-full p-4 bg-[#141823] border border-gray-500 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-[#616dc9] transition-colors\"\r\n            />\r\n            <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\r\n              {searching ? (\r\n                <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-[#616dc9]\"></div>\r\n              ) : (\r\n                <svg className=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n                </svg>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {hasSearched && (\r\n          <div className=\"space-y-4\">\r\n            {searchResults.length > 0 ? (\r\n              <>\r\n                <h2 className=\"text-xl font-semibold text-white mb-4\">\r\n                  Found {searchResults.length} user{searchResults.length !== 1 ? 's' : ''}\r\n                </h2>\r\n                <div className=\"grid gap-4\">\r\n                  {searchResults.map((userResult) => (\r\n                    <div\r\n                      key={userResult.id}\r\n                      className=\"bg-[#141823] border border-gray-600 rounded-lg p-4 hover:border-[#616dc9] transition-colors cursor-pointer\"\r\n                      onClick={() => visitUserProfile(userResult.id)}\r\n                    >\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                          <h3 className=\"text-lg font-semibold text-white\">\r\n                            @{userResult.username}\r\n                          </h3>\r\n                          {userResult.displayName && (\r\n                            <p className=\"text-gray-300 text-sm\">\r\n                              {userResult.displayName}\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-2 text-[#616dc9]\">\r\n                          <span className=\"text-sm\">View Profile</span>\r\n                          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n                          </svg>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <div className=\"text-center py-12\">\r\n                <svg className=\"w-16 h-16 text-gray-500 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\r\n                </svg>\r\n                <h3 className=\"text-lg font-semibold text-gray-300 mb-2\">No users found</h3>\r\n                <p className=\"text-gray-500\">Try searching with a different username</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {!hasSearched && (\r\n          <div className=\"text-center py-12\">\r\n            <svg className=\"w-16 h-16 text-gray-500 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n            </svg>\r\n            <h3 className=\"text-lg font-semibold text-gray-300 mb-2\">Discover the ManaVault Community</h3>\r\n            <p className=\"text-gray-500\">Enter a username to find MTG collectors and explore their profiles and collections</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}