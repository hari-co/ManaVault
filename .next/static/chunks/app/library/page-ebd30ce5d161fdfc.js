(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[382],{3758:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>b});var t=a(5155),l=a(2115),s=a(6203),n=a(4746),o=a(9265),i=a(5695),c=a(5317),d=a(5393),u=a(5360);let h=()=>{let[e,r]=(0,l.useState)(""),[a,s]=(0,l.useState)([]),[i,h]=(0,l.useState)(!1),[x,f]=(0,l.useState)(!1),g=(0,d.Q)(),p=(0,l.useContext)(o.Q);if(!p)throw Error("BinderContext not found.");let{currentBinder:b,setCurrentBinder:m}=p,w=async e=>{let a=e.target.value;if(r(a),a.length<3){s([]),f(!1);return}{h(!0);let e=await fetch("https://api.scryfall.com/cards/autocomplete?q=".concat(encodeURIComponent(a)));s((await e.json()).data||[]),h(!1),f(!0)}},j=async e=>{try{let r=await fetch("https://api.scryfall.com/cards/named?exact=".concat(encodeURIComponent(e)));if(!r.ok)throw Error("Card not found");let a=await r.json(),t=(0,u.z)(a,b);for(let e in t)void 0===t[e]&&(t[e]=null);return t}catch(e){return console.error("Error fetching card:",e),null}},v=async e=>{r(""),f(!1);try{if(!g||!g.uid)return void console.log("No user logged in");let r=await j(e),a=await (0,c.addDoc)((0,c.collection)(n.db,"users",g.uid,"binders","all","cards"),r);await (0,c.updateDoc)(a,{id:a.id}),b&&"all"!=b&&await (0,c.setDoc)((0,c.doc)(n.db,"users",g.uid,"binders",b,"cards",a.id),{...r,id:a.id}),s([])}catch(e){console.error("Error adding card to binder:",e)}};return(0,t.jsxs)("div",{className:"bg-[#121519] w-3xs h-10 z-[100] relative",children:[(0,t.jsx)("input",{className:"border border-[#5e5e5e] rounded px-2 py-1 w-full h-full",type:"text",name:"card-search",placeholder:"Search for a card...",value:e,onChange:w,autoComplete:"off",onFocus:()=>f(a.length>0),onBlur:()=>setTimeout(()=>f(!1),100)}),!x&&i&&(0,t.jsx)("div",{className:"absolute left-0 top-full bg-gray-800 text-white w-64 px-4 py-2 z-[100]",children:"Loading..."}),x&&a.length>0&&(0,t.jsx)("div",{className:"absolute left-0 top-full border rounded bg-gray-800 text-white h-64 w-64 overflow-y-auto z-[100]",children:(0,t.jsx)("ul",{children:a.map(e=>(0,t.jsx)("li",{className:"px-4 py-2 hover:bg-gray-200 cursor-pointer",onMouseDown:()=>v(e),children:e},e))})})]})};var x=a(5612),f=a(6035),g=a(4204),p=a(199);function b(){let[e,r]=(0,l.useState)(null),[a,c]=(0,l.useState)(!1),[d,u]=(0,l.useState)(""),b=(0,i.useRouter)();return(0,l.useEffect)(()=>{let e=(0,s.hg)(n.j,e=>{r(e),e?u("".concat(window.location.origin,"/library/").concat(e.uid)):b.push("/account/login")});return()=>e()}),e&&(0,t.jsxs)(o.y,{children:[(0,t.jsxs)("div",{className:"flex flex-col min-h-[calc(100vh-3.5rem)] w-full font-sans font-medium",children:[(0,t.jsxs)("div",{className:"text-gray-300 bg-gradient-to-b from-[#3f3cec] to-[#423fe9] p-3 h-60 relative flex-shrink-0",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-full h-full",style:{backgroundImage:"\n                        linear-gradient(transparent, #181e2c)",zIndex:2}}),(0,t.jsx)("h1",{className:"font-bold text-5xl pl-12 pt-15 z-10 relative",children:"Library"}),(0,t.jsx)("div",{className:"absolute right-15 top-8 z-10",children:(0,t.jsxs)("button",{onClick:()=>c(!0),className:"flex items-center space-x-2 bg-white/10 backdrop-blur-sm border border-white/20 text-white px-4 py-2 rounded-lg hover:bg-white/20 transition-all duration-200 shadow-lg",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92S19.61 16.08 18 16.08z"})}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Share"})]})}),(0,t.jsx)(g.A,{})]}),(0,t.jsxs)("div",{className:"flex flex-grow bg-[#181e2c]",children:[(0,t.jsx)("div",{children:(0,t.jsx)(x.A,{})}),(0,t.jsxs)("div",{className:"flex w-full h-full flex-col",children:[(0,t.jsxs)("div",{className:"flex rounded-bl-lg rounded-br-lg ml-12 mr-12 py-3 px-7 h-25 bg-[#141822] text-[#bfc8ce] relative z-20 border border-gray-600",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-full h-full z-1 overflow-x-hidden",style:{backgroundImage:"\n                                    repeating-linear-gradient(0deg, rgba(36, 40, 61, 0.8) 0px, rgba(36, 40, 61, 0.8) 1px, transparent 1px, transparent 20px),\n                                    repeating-linear-gradient(90deg, rgba(36, 40, 61, 0.8) 0px, rgba(36, 40, 61, 0.8) 1px, transparent 1px, transparent 20px)\n                                    ",WebkitMaskImage:"linear-gradient(white, transparent 70%)",maskImage:"linear-gradient(white, transparent 70%)"}}),(0,t.jsxs)("div",{className:"z-10",children:[(0,t.jsx)("h2",{children:"Quick Add"}),(0,t.jsx)(h,{})]})]}),(0,t.jsx)("div",{className:"flex h-full justify-center scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-300",children:(0,t.jsx)(f.A,{})})]})]}),(0,t.jsx)("div",{className:"h-15 bg-[#181e2c]"})]}),(0,t.jsx)(p.A,{isOpen:a,onClose:()=>c(!1),shareUrl:d,title:"Share My Library"})]})}},8795:(e,r,a)=>{Promise.resolve().then(a.bind(a,3758))}},e=>{var r=r=>e(e.s=r);e.O(0,[992,811,75,367,441,684,358],()=>r(8795)),_N_E=e.O()}]);